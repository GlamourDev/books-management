(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){e.exports=n(239)},105:function(e,t,n){},106:function(e,t,n){},239:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(39),l=n.n(c),i=(n(105),n(12)),r=n(13),s=n(24),m=n(23),u=n(25),d=(n(106),n(92)),h=n(41),b=n.n(h),p=n(65),k=n(2),f=n(14),v=n.n(f),E="http://localhost:8080",C=new(function(){function e(){Object(i.a)(this,e)}return Object(r.a)(e,[{key:"retrieveAllBooks",value:function(){return v.a.get("".concat(E,"/books"))}},{key:"retrieveBook",value:function(e){return v.a.get("".concat(E,"/books/").concat(e))}},{key:"deleteBook",value:function(e){return v.a.delete("".concat(E,"/books/").concat(e))}},{key:"updateBook",value:function(e,t){return v.a.put("".concat(E,"/books/").concat(e),t)}},{key:"createBook",value:function(e){return v.a.post("".concat(E,"/books/"),e)}}]),e}()),g=n(66),y=n.n(g),O=n(96),j=n.n(O),B=n(95),w=n.n(B),N=n(40),S=n.n(N),x=n(93),D=n(3);function A(){var e=Object(d.a)(["\n      display: table;\n      margin: 0 auto;\n      border-color: red;\n    "]);return A=function(){return e},e}var T=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).componentWillUnmount=function(){n.mounted=!1,n.timeout&&clearTimeout(n.timeout)},n.timeout=null,n.state={books:[],currentPage:1,booksPerPage:3,loading:!1,clicked:!1,message:null},n.deleteBookClicked=n.deleteBookClicked.bind(Object(k.a)(Object(k.a)(n))),n.updateBookClicked=n.updateBookClicked.bind(Object(k.a)(Object(k.a)(n))),n.addBookClicked=n.addBookClicked.bind(Object(k.a)(Object(k.a)(n))),n.refreshbooks=n.refreshBooks.bind(Object(k.a)(Object(k.a)(n))),n.handleClick=n.handleClick.bind(Object(k.a)(Object(k.a)(n))),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.refreshBooks(),this.mounted=!0}},{key:"handleClick",value:function(e){var t=this;this.setState({currentPage:Number(e.target.id)}),this.state.clicked||this.setState({clicked:!0,loading:!0},Object(p.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.timeout=setTimeout(function(){t.mounted&&t.setState({clicked:!1,loading:!1}),t.timeout=null},1500);case 1:case"end":return e.stop()}},e)})))}},{key:"refreshBooks",value:function(){var e=this;C.retrieveAllBooks().then(function(t){console.log(t),e.setState({books:t.data})}),this.state.clicked||this.setState({clicked:!0,loading:!0},Object(p.a)(b.a.mark(function t(){return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.timeout=setTimeout(function(){e.mounted&&e.setState({clicked:!1,loading:!1}),e.timeout=null},1500);case 1:case"end":return t.stop()}},t)})))}},{key:"deleteBookClicked",value:function(e){var t=this;C.deleteBook(e).then(function(n){t.setState({message:"Delete of course ".concat(e," Successful")}),t.refreshBooks()})}},{key:"addBookClicked",value:function(){this.props.history.push("/books/-1")}},{key:"updateBookClicked",value:function(e){this.props.history.push("/books/".concat(e))}},{key:"render",value:function(){for(var e=this,t=this.state,n=t.books,a=t.currentPage,c=t.booksPerPage,l=t.id,i=a*c,r=i-c,s=n.slice(r,i),m=[],u=1;u<=Math.ceil(n.length/c);u++)m.push(u);console.log(m,l,a);var d=m.map(function(t){return o.a.createElement("li",{className:"".concat(a===t?"pagination-active":""," "),key:t,id:t,onClick:e.handleClick},t)}),h=Object(D.css)(A());return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"sweet-loading"},o.a.createElement(x.ScaleLoader,{sizeUnit:"px",size:150,css:h,color:"#123abc",loading:this.state.loading})),o.a.createElement("h3",null,"Books"),this.state.message&&o.a.createElement("div",{class:"alert alert-success"},this.state.message),o.a.createElement("div",{className:"container"},o.a.createElement("table",{className:"table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Title"),o.a.createElement("th",null,"Author"),o.a.createElement("th",null,"ISBN-13"),o.a.createElement("th",null,"Comments"),o.a.createElement("th",null,"Edit"),o.a.createElement("th",null,"Delete"))),o.a.createElement("tbody",null,s.map(function(t){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.id),o.a.createElement("td",null,t.description),o.a.createElement("td",null,t.author),o.a.createElement("td",null,t.isbn),o.a.createElement("td",null,t.commentCount),o.a.createElement("td",null,o.a.createElement(y.a,{"aria-label":"Edit"},o.a.createElement(w.a,{onClick:function(){return e.updateBookClicked(t.id)}}))),o.a.createElement("td",null,o.a.createElement(y.a,{"aria-label":"Delete"},o.a.createElement(j.a,{onClick:function(){return e.deleteBookClicked(t.id)}}))))}))),o.a.createElement("div",null,o.a.createElement(S.a,{variant:"outlined",color:"primary",onClick:this.addBookClicked,type:"submit",style:{padding:"0.5rem 2rem",height:"2.5rem",float:"right"}},"Add book")),o.a.createElement("div",null,o.a.createElement("ul",{className:"pagination",id:"page-numbers"},d))))}}]),t}(a.Component),P=n(99),z=n(26),M=n(20),I=new(function(){function e(){Object(i.a)(this,e)}return Object(r.a)(e,[{key:"retrieveAllComments",value:function(){return v.a.get("".concat("http://localhost:8080","/comments"))}},{key:"retrieveComment",value:function(e){return v.a.get("".concat("http://localhost:8080","/comments/").concat(e))}},{key:"deleteComment",value:function(e){return v.a.delete("".concat("http://localhost:8080","/comments/").concat(e))}},{key:"updateComment",value:function(e,t){return v.a.put("".concat("http://localhost:8080","/comments/").concat(e),t)}},{key:"createComment",value:function(e){return console.log("executed service"),v.a.post("".concat("http://localhost:8080","/comments/"),e)}}]),e}()),L=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).getDate=function(){var e=(new Date).toDateString().slice(0,10);n.setState({date:e})},n.state={id:n.props.match.params.id,author:"",date:"",description:"",comments:[],isbn:""},n.onSubmit=n.onSubmit.bind(Object(k.a)(Object(k.a)(n))),n.onSubmitComment=n.onSubmitComment.bind(Object(k.a)(Object(k.a)(n))),n.validate=n.validate.bind(Object(k.a)(Object(k.a)(n))),n.refreshComments=n.refreshComments.bind(Object(k.a)(Object(k.a)(n))),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getDate(),this.refreshComments(),-1!=this.state.id&&(C.retrieveBook(this.state.id).then(function(t){return e.setState({description:t.data.description,author:t.data.author,isbn:t.data.isbn,commentCount:t.data.commentCount})}),I.retrieveComment(this.state.id).then(function(t){return e.setState({comments:t.data.comments,timestamp:t.data.timestamp})}))}},{key:"validate",value:function(e){var t={};return e.description?e.description.length<5&&(t.description="Enter atleast 5 Characters in Title"):t.description="Enter Title",t}},{key:"refreshComments",value:function(){var e=this;I.retrieveAllComments().then(function(t){e.setState({comments:t.data})})}},{key:"renderComments",value:function(){return this.state.comments.map(function(e){return o.a.createElement("ul",{key:e.id},o.a.createElement("li",null,"Date: ",o.a.createElement("span",null,e.timestamp)),o.a.createElement("li",null,"Comment: ",o.a.createElement("span",null,e.comments)))})}},{key:"onSubmit",value:function(e){var t=this,n={id:this.state.id,description:e.description,author:e.author,isbn:e.isbn,targetDate:e.targetDate,commentCount:e.commentCount};"-1"===this.state.id?C.createBook(n).then(function(){return t.props.history.push("/books")}):C.updateBook(this.state.id,n).then(function(){return t.props.history.push("/books")}),console.log(e)}},{key:"onSubmitComment",value:function(e){var t=this,n={id:this.state.id,comments:e.comments,timestamp:this.state.date};"-1"===this.state.id?I.createComment(n).then(function(){return t.props.history.push("/books")}):I.updateComment(this.state.id,n).then(function(){return t.props.history.push("/books")}),console.log(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.description,a=t.id,c=t.author,l=t.isbn,i=t.commentCount;return console.log(this.state.comments),o.a.createElement("div",null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-6 first-column"},o.a.createElement("h3",null,"Add | Edit book"),o.a.createElement(M.d,{initialValues:{id:a,description:n,author:c,isbn:l,commentCount:i},onSubmit:this.onSubmit,validateOnChange:!1,validateOnBlur:!1,validate:this.validate,enableReinitialize:!0},function(t){return o.a.createElement(M.c,null,o.a.createElement(M.a,{name:"description",component:"div",className:"alert alert-warning"}),o.a.createElement("fieldset",{className:"form-group"},o.a.createElement("label",null,"Title"),o.a.createElement(M.b,{className:"form-control",type:"text",name:"description"})),o.a.createElement("fieldset",{className:"form-group"},o.a.createElement("label",null,"Author"),o.a.createElement(M.b,{className:"form-control",type:"text",name:"author"})),o.a.createElement("fieldset",{className:"form-group"},o.a.createElement("label",null,"ISBN-13"),o.a.createElement(M.b,{className:"form-control",type:"text",name:"isbn"})),o.a.createElement(S.a,{variant:"outlined",color:"primary",onClick:e.addBookClicked,type:"submit",className:"float-right",style:{padding:"0.5rem 2rem",height:"2.5rem",float:"right",color:"#28a745",border:"1px solid rgba(40, 167, 69, 0.5)"}},"Update"))})),o.a.createElement("div",{className:"col-sm-6 second-column"},o.a.createElement("h3",null,"Comments"),o.a.createElement(M.d,{onSubmit:this.onSubmitComment,enableReinitialize:!0,initialValues:{id:a}},function(e){return o.a.createElement(M.c,null,o.a.createElement("fieldset",{className:"form-group"},o.a.createElement("label",null,"Comment"),o.a.createElement(M.b,{className:"form-control",type:"text",name:"comments"})),o.a.createElement(S.a,{size:"medium",type:"submit",className:"float-right"},"Add comment"))}),o.a.createElement("div",{className:"comments-box"},this.renderComments())))))}}]),t}(a.Component),U=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(P.a,null,o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{style:{"margin-bottom":"4%"}},"Test-assignment for Ignite"),o.a.createElement(z.c,null,o.a.createElement(z.a,{path:"/",exact:!0,component:T}),o.a.createElement(z.a,{path:"/books",exact:!0,component:T}),o.a.createElement(z.a,{path:"/books/:id",component:L}))))}}]),t}(a.Component),W=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement(U,null),o.a.createElement("div",{id:"wrapper"},o.a.createElement("h1",null,"Made with",o.a.createElement("svg",{id:"text-heart",onClick:function(){return window.open("https://bit.ly/hlportfolios","_blank")},width:"24",height:"24",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"})),"by Henry L\xf5iv")))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[100,1,2]]]);
//# sourceMappingURL=main.54c3d006.chunk.js.map