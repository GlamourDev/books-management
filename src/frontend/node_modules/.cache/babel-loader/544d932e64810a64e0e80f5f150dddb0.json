{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Henry\\\\Pictures\\\\tlnsadama kliendipinnacroppedimages\\\\react-and-spring-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Henry\\\\Pictures\\\\tlnsadama kliendipinnacroppedimages\\\\react-and-spring-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Henry\\\\Pictures\\\\tlnsadama kliendipinnacroppedimages\\\\react-and-spring-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Henry\\\\Pictures\\\\tlnsadama kliendipinnacroppedimages\\\\react-and-spring-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Henry\\\\Pictures\\\\tlnsadama kliendipinnacroppedimages\\\\react-and-spring-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Henry\\\\Pictures\\\\tlnsadama kliendipinnacroppedimages\\\\react-and-spring-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Henry\\\\Pictures\\\\tlnsadama kliendipinnacroppedimages\\\\react-and-spring-master\\\\frontend\\\\src\\\\component\\\\EditBooksComponent.jsx\";\nimport React, { Component } from \"react\";\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\nimport BooksDataService from \"../service/BooksDataService\";\nimport CommentsDataService from \"../service/CommentsDataService\";\n\nvar EditBooksComponent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EditBooksComponent, _Component);\n\n  function EditBooksComponent(props) {\n    var _this;\n\n    _classCallCheck(this, EditBooksComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditBooksComponent).call(this, props));\n    _this.state = {\n      id: _this.props.match.params.id,\n      author: \"\",\n      description: \"\",\n      isbn: \"\"\n    };\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.validate = _this.validate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(EditBooksComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      console.log(this.state.id); // eslint-disable-next-line\n\n      if (this.state.id == -1) {\n        return;\n      }\n\n      BooksDataService.retrieveBook(this.state.id).then(function (response) {\n        return _this2.setState({\n          description: response.data.description,\n          author: response.data.author,\n          isbn: response.data.isbn,\n          commentCount: response.data.commentCount\n        });\n      });\n    }\n  }, {\n    key: \"validate\",\n    value: function validate(values) {\n      var errors = {};\n\n      if (!values.description) {\n        errors.description = \"Enter a Description\";\n      } else if (values.description.length < 5) {\n        errors.description = \"Enter atleast 5 Characters in Description\";\n      }\n\n      return errors;\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(values) {\n      var _this3 = this;\n\n      var book = {\n        id: this.state.id,\n        description: values.description,\n        author: values.author,\n        isbn: values.isbn,\n        targetDate: values.targetDate,\n        commentCount: values.commentCount\n      };\n\n      if (this.state.id === \"-1\") {\n        BooksDataService.createBook(book).then(function () {\n          return _this3.props.history.push(\"/books\");\n        });\n      } else {\n        console.log(\"EI JOOKSE\");\n        BooksDataService.updateBook(this.state.id, book).then(function () {\n          return _this3.props.history.push(\"/books\");\n        });\n      }\n\n      console.log(values);\n    }\n  }, {\n    key: \"onSubmitComment\",\n    value: function onSubmitComment(values) {\n      var _this4 = this;\n\n      var comment = {\n        id: this.state.id,\n        comment: values.comment\n      };\n      console.log(comment);\n\n      if (this.state.id === \"-1\") {\n        CommentsDataService.createBook(comment).then(function () {\n          return _this4.props.history.push(\"/comments\");\n        });\n      } else {\n        console.log(\"EI JOOKSE\");\n        CommentsDataService.updateBook(this.state.id, comment).then(function () {\n          return _this4.props.history.push(\"/comment\");\n        });\n      }\n\n      console.log(values);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          description = _this$state.description,\n          id = _this$state.id,\n          author = _this$state.author,\n          isbn = _this$state.isbn;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm-6 first-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Edit book\"), React.createElement(Formik, {\n        initialValues: {\n          id: id,\n          description: description,\n          author: author,\n          isbn: isbn\n        },\n        onSubmit: this.onSubmit,\n        validateOnChange: false,\n        validateOnBlur: false,\n        validate: this.validate,\n        enableReinitialize: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, function (props) {\n        return React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, React.createElement(ErrorMessage, {\n          name: \"description\",\n          component: \"div\",\n          className: \"alert alert-warning\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }), React.createElement(\"fieldset\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, \"Id\"), React.createElement(Field, {\n          className: \"form-control\",\n          type: \"text\",\n          name: \"id\",\n          disabled: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        })), React.createElement(\"fieldset\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, \"Title\"), React.createElement(Field, {\n          className: \"form-control\",\n          type: \"text\",\n          name: \"description\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        })), React.createElement(\"fieldset\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, \"Author\"), React.createElement(Field, {\n          className: \"form-control\",\n          type: \"text\",\n          name: \"author\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        })), React.createElement(\"fieldset\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, \"ISBN-13\"), React.createElement(Field, {\n          className: \"form-control\",\n          type: \"text\",\n          name: \"isbn\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: \"btn btn-success float-right\",\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, \"Update\"));\n      })), React.createElement(\"div\", {\n        className: \"col-sm-6 second-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Comments\"), React.createElement(Formik, {\n        onSubmit: this.onSubmitComment,\n        initialValues: {\n          id: id\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, function (props) {\n        return React.createElement(Form, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(\"fieldset\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, React.createElement(Field, {\n          className: \"form-control\",\n          type: \"text\",\n          name: \"id\",\n          disabled: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }), React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, \"Comment\"), React.createElement(Field, {\n          className: \"form-control\",\n          type: \"text\",\n          name: \"comment\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: \"btn btn-success float-right\",\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, \"Add comment\"));\n      })))));\n    }\n  }]);\n\n  return EditBooksComponent;\n}(Component);\n\nexport default EditBooksComponent;","map":{"version":3,"sources":["C:\\Users\\Henry\\Pictures\\tlnsadama kliendipinnacroppedimages\\react-and-spring-master\\frontend\\src\\component\\EditBooksComponent.jsx"],"names":["React","Component","Formik","Form","Field","ErrorMessage","BooksDataService","CommentsDataService","EditBooksComponent","props","state","id","match","params","author","description","isbn","onSubmit","bind","validate","console","log","retrieveBook","then","response","setState","data","commentCount","values","errors","length","book","targetDate","createBook","history","push","updateBook","comment","onSubmitComment"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\nimport BooksDataService from \"../service/BooksDataService\";\nimport CommentsDataService from \"../service/CommentsDataService\";\n\nclass EditBooksComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      id: this.props.match.params.id,\n      author: \"\",\n      description: \"\",\n      isbn: \"\"\n    };\n\n    this.onSubmit = this.onSubmit.bind(this);\n    this.validate = this.validate.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(this.state.id);\n\n    // eslint-disable-next-line\n    if (this.state.id == -1) {\n      return;\n    }\n\n    BooksDataService.retrieveBook(this.state.id).then(response =>\n      this.setState({\n        description: response.data.description,\n        author: response.data.author,\n        isbn: response.data.isbn,\n        commentCount: response.data.commentCount\n      })\n    );\n  }\n  validate(values) {\n    let errors = {};\n    if (!values.description) {\n      errors.description = \"Enter a Description\";\n    } else if (values.description.length < 5) {\n      errors.description = \"Enter atleast 5 Characters in Description\";\n    }\n\n    return errors;\n  }\n  onSubmit(values) {\n    let book = {\n      id: this.state.id,\n      description: values.description,\n      author: values.author,\n      isbn: values.isbn,\n      targetDate: values.targetDate,\n      commentCount: values.commentCount\n    };\n\n    if (this.state.id === \"-1\") {\n      BooksDataService.createBook(book).then(() =>\n        this.props.history.push(\"/books\")\n      );\n    } else {\n      console.log(\"EI JOOKSE\");\n      BooksDataService.updateBook(this.state.id, book).then(() =>\n        this.props.history.push(\"/books\")\n      );\n    }\n    console.log(values);\n  }\n\n  onSubmitComment(values) {\n    let comment = {\n      id: this.state.id,\n      comment: values.comment\n    };\n\n    console.log(comment);\n\n    if (this.state.id === \"-1\") {\n      CommentsDataService.createBook(comment).then(() =>\n        this.props.history.push(\"/comments\")\n      );\n    } else {\n      console.log(\"EI JOOKSE\");\n      CommentsDataService.updateBook(this.state.id, comment).then(() =>\n        this.props.history.push(\"/comment\")\n      );\n    }\n    console.log(values);\n  }\n\n  render() {\n    let { description, id, author, isbn } = this.state;\n\n    return (\n      <div>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-sm-6 first-column\">\n              <h3>Edit book</h3>\n              <Formik\n                initialValues={{ id, description, author, isbn }}\n                onSubmit={this.onSubmit}\n                validateOnChange={false}\n                validateOnBlur={false}\n                validate={this.validate}\n                enableReinitialize={true}\n              >\n                {props => (\n                  <Form>\n                    <ErrorMessage\n                      name=\"description\"\n                      component=\"div\"\n                      className=\"alert alert-warning\"\n                    />\n                    <fieldset className=\"form-group\">\n                      <label>Id</label>\n                      <Field\n                        className=\"form-control\"\n                        type=\"text\"\n                        name=\"id\"\n                        disabled\n                      />\n                    </fieldset>\n                    <fieldset className=\"form-group\">\n                      <label>Title</label>\n                      <Field\n                        className=\"form-control\"\n                        type=\"text\"\n                        name=\"description\"\n                      />\n                    </fieldset>\n                    <fieldset className=\"form-group\">\n                      <label>Author</label>\n                      <Field\n                        className=\"form-control\"\n                        type=\"text\"\n                        name=\"author\"\n                      />\n                    </fieldset>\n                    <fieldset className=\"form-group\">\n                      <label>ISBN-13</label>\n                      <Field className=\"form-control\" type=\"text\" name=\"isbn\" />\n                    </fieldset>\n                    <button\n                      className=\"btn btn-success float-right\"\n                      type=\"submit\"\n                    >\n                      Update\n                    </button>\n                  </Form>\n                )}\n              </Formik>\n            </div>\n            <div className=\"col-sm-6 second-column\">\n              <h3>Comments</h3>\n              <Formik onSubmit={this.onSubmitComment} initialValues={{ id }}>\n                {props => (\n                  <Form>\n                    <fieldset className=\"form-group\">\n                      <Field\n                        className=\"form-control\"\n                        type=\"text\"\n                        name=\"id\"\n                        disabled\n                      />\n                      <label>Comment</label>\n                      <Field\n                        className=\"form-control\"\n                        type=\"text\"\n                        name=\"comment\"\n                      />\n                    </fieldset>\n                    <button\n                      className=\"btn btn-success float-right\"\n                      type=\"submit\"\n                    >\n                      Add comment\n                    </button>\n                  </Form>\n                )}\n              </Formik>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default EditBooksComponent;\n"]},"metadata":{},"sourceType":"module"}